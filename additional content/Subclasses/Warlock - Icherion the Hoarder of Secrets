/*	-WHAT IS THIS?-
	This file adds optional material to "MPMB's Character Record Sheet" found at https://flapkan.com/mpmb/charsheets
	Import this file using the "Add Extra Materials" bookmark.
	-KEEP IN MIND-
	It is recommended to enter the code in a fresh sheet before adding any other information (i.e. before making your character with it).
*/

/*  -INFORMATION-
	Subject:	Subclass
	Effect:		This script adds a subclass for the Warlock, called "Icherion the Hoarder of Secrets"
				This subclass is made by Gldnlion
	Code by:	Gldnlion
	Date:		2020-01-16 (sheet v12.999)
*/

var iFileName = "Warlock - Icherion the Hoarder of Secrets.js";
RequiredSheetVersion(12.999);

AddSubClass("warlock", "Icherion the Hoarder of Secrets", {
	regExpSearch : /^(?=.*\bicherion)(?=.*hoarder\b).*$/i,
	subname : "Icherion the Hoarder of Secrets",
	source : ["HB", 0],
	spellcastingExtra : ["identify", "speak with animals", "detect thoughts", "locate object", "speak with dead", "clairvoyance", "arcane eye", "locate creature", "legend lore", "passwall"],
	features : {
		"subclassfeature1" : {
			name : "Lair of Secrets",
			source : ["HB", 0],
			minlevel : 1,
			description : 	"Starting at 1st level when you choose this patron, you can send your mind into the lair of Icherion to look among the detritus of secrets provided by its other servants.",
					"You can use a bonus action to gain advantage on and double your proficiency bonus (if you have one) for an ability check you make that uses Arcana, History, Insight, Nature, Tool Skill,, or Religion.",
					"Once you do so, you can’t use this feature again until you finish a long rest. You can use this feature twice between long rests starting at 9th level and three times between long rests starting at 18th level.",
			action : ["bonus action", ""],
			usages : 1,
			recovery : "long rest",
			
			}
		},
		"subclassfeature1.1" : {
			name : "Sharing Secrets",
			source : ["HB", 0],
			minlevel : 1,
			description : "Also at 1st level, Icherion begins to make demands upon your soul. Once per day, when you cast a divination spell, ",
				"you must whispoer a secret for Icherion to add to his lair. As you increase in levels Icherion demands more important and interesting secrets. ",
			usages : 1,
			recovery : "long rest",
			}
		},
		"subclassfeature6" : {
			name : "Pact Boon: Pact of the Bones",
			source : ["HB", 0],
			minlevel : 3,
			description : "\n   " + "At 3rd level, a character dedicated to Icherion can select this option instead of one of the warlock’s existing Pact Boon options. ",
				"Icherion grants you a bag of bones. While the bones are on your person, you cast the augury spell with the bag (arcane focus) (or as a ritual). The spell doesn’t count against your number of spells known. ",
				"The bones can also be dumped (cannot do augury while this is in use) to call forth a skeleton under your control. ",
				"If you lose your bag of Bone, you can perform a 1-hour ceremony to receive a replacement from Icherion. The ceremony can be performed during a short or long rest, and it destroys the previous bag. The cbag disappears in a flash of light when you die.",	
		},
		"subclassfeature10" : {
			name : "Hardened",
			source : ["HB", 0],
			minlevel : 10,
			description : "\n   " + "I can't be frightened",
			savetxt : { immune : ["frightened"] }
		},
		"subclassfeature14" : {
			name : "Killing strike",
			source : ["HB", 0],
			minlevel : 14,
			description : "\n   " + "As a bonus action when I successfully hit a target, I can cast Finger of Death" + "\n   " + "The spell is cast as if using my highest level warlock spell slot, but does not expend any",
			usages : 1,
			additional : ["", "", "", "", "", "", "", "", "", "", "", "", "", "as 7th-level spell", "as 8th-level spell", "as 8th-level spell", "as 9th-level spell", "as 9th-level spell", "as 9th-level spell", "as 9th-level spell"],
			recovery : "long rest",
			action : ["bonus action", ""],
			spellcastingBonus : {
				name : "Killing Strike",
				spells : ["finger of death"],
				selection : ["finger of death"]
			}
		}
	}
});

//add the invocations
AddWarlockInvocation("Summon Multiple Skeletons", {
	name : "Summon Multiple Skeletons ",
	description : "\n   " + "Prerequisite:Pact of the Bones & Warlock Lvl 3, You can summon one addtional skeleton (2 addtional at warlock level 7, 3 at warlock level 11 and 4 at warlock level 15)",
	source : ["HB:AC", 3],
	spellcastingBonus : {
		name : "The Better to See You With",
		spells : ["faerie fire"],
		selection : ["faerie fire"],
		atwill : true
	}
});

if (!SourceList["HB:AC"]) {
	SourceList["HB:AC"] = {
		name : "Homebrew: Aeirlon Campaign",//
		abbreviation : "HB:AC",
		group : "Homebrew",
		url : "https://https://homebrewery.naturalcrit.com/share/HkQDjxfpeI",
		date : "2020/01/29"
	};
};
