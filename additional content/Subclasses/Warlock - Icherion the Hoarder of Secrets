/*	-WHAT IS THIS?-
	This file adds optional material to "MPMB's Character Record Sheet" found at https://flapkan.com/mpmb/charsheets
	Import this file using the "Add Extra Materials" bookmark.
	-KEEP IN MIND-
	It is recommended to enter the code in a fresh sheet before adding any other information (i.e. before making your character with it).
*/

/*  -INFORMATION-
	Subject:	Subclass
	Effect:		This script adds a subclass for the Warlock, called "Icherion the Hoarder of Secrets"
				This subclass is made by Gldnlion
	Code by:	Gldnlion
	Date:		2020-01-16 (sheet v12.999)
*/

var iFileName = "Warlock - Icherion the Hoarder of Secrets.js";
RequiredSheetVersion(12.999);

AddSubClass("warlock", "Icherion the Hoarder of Secrets", {
	regExpSearch : /^(?=.*\bicherion)(?=.*hoarder\b).*$/i,
	subname : "Icherion the Hoarder of Secrets",
	source : ["HB", 0],
	spellcastingExtra : ["identify", "speak with animals", "detect thoughts", "locate object", "speak with dead", "clairvoyance", "arcane eye", "locate creature", "legend lore", "passwall"],
	features : {
		"subclassfeature1" : {
			name : "Lair of Secrets",
			source : ["HB", 0],
			minlevel : 1,
			description : 	"Starting at 1st level when you choose this patron, you can send your mind into the lair of Icherion to look among the detritus of secrets provided by its other servants.",
					"You can use a bonus action to gain advantage on and double your proficiency bonus for an ability check you make that uses Arcana, History, Insight, Nature, or Religion.",
					"Once you do so, you canâ€™t use this feature again until you finish a long rest. You can use this feature twice between long rests starting at 9th level and three times between long rests starting at 18th level.",
			action : ["bonus action", ""],
			usages : 1,
			recovery : "long rest",
			
			}
		},
		"subclassfeature1.1" : {
			name : "Sharing Secrets",
			source : ["HB", 0],
			minlevel : 1,
			description : "Also at 1st level, Icherion begins to make demands upon your soul. Once per day, when you cast a divination spell,",
				"you must whispoer a secret for Icherion to add to his lair. As you increase in levels Icherion demands more important and interesting secrets.",
			usages : 1,
			recovery : "long rest",
			}
		},
		"subclassfeature6" : {
			name : "Natural Explorer",
			source : ["HB", 0],
			minlevel : 6,
			description : "\n   " + "Use the \"Choose Features\" button above to add a favored terrain to the third page",
			additional : ["", "", "", "", "", "1 favored terrains", "1 favored terrains", "1 favored terrains", "1 favored terrains", "2 favored terrains", "2 favored terrains", "2 favored terrains", "2 favored terrains", "3 favored terrains", "3 favored terrains", "3 favored terrains", "3 favored terrains", "3 favored terrains", "3 favored terrains", "3 favored terrains"],
			extraname : "Favored Terrain",
			extrachoices : ["Arctic", "Coast", "Desert", "Forest", "Grassland", "Mountain", "Swamp", "Underdark"],
			"arctic" : {
				name : "Arctic",
				source : ["HB", 0],
				description : "\n   " + "I can double my proficiency bonus for Int/Wis checks concerning arctic terrain" + "\n   " + "While traveling for an hour or more in arctic terrain I gain the following benefits:" + "\n    - " + "My allies and I are not slowed by difficult terrain and can't get lost except by magic" + "\n    - " + "I am alert to danger even when doing something else; I forage twice as much food" + "\n    - " + "If alone (or alone with beast companion), I can move stealthily at my normal pace" + "\n    - " + "When tracking, I also learn the exact number, size, and time since passing"
			},
			"coast" : {
				name : "Coast",
				source : ["HB", 0],
				description : "\n   " + "I can double my proficiency bonus for Int/Wis checks concerning coast terrain" + "\n   " + "While traveling for an hour or more in coast terrain I gain the following benefits:" + "\n    - " + "My allies and I are not slowed by difficult terrain and can't get lost except by magic" + "\n    - " + "I am alert to danger even when doing something else; I forage twice as much food" + "\n    - " + "If alone (or alone with beast companion), I can move stealthily at my normal pace" + "\n    - " + "When tracking, I also learn the exact number, size, and time since passing"
			},
			"desert" : {
				name : "Desert",
				source : ["HB", 0],
				description : "\n   " + "I can double my proficiency bonus for Int/Wis checks concerning desert terrain" + "\n   " + "While traveling for an hour or more in desert terrain I gain the following benefits:" + "\n    - " + "My allies and I are not slowed by difficult terrain and can't get lost except by magic" + "\n    - " + "I am alert to danger even when doing something else; I forage twice as much food" + "\n    - " + "If alone (or alone with beast companion), I can move stealthily at my normal pace" + "\n    - " + "When tracking, I also learn the exact number, size, and time since passing"
			},
			"forest" : {
				name : "Forest",
				source : ["HB", 0],
				description : "\n   " + "I can double my proficiency bonus for Int/Wis checks concerning forest terrain" + "\n   " + "While traveling for an hour or more in forest terrain I gain the following benefits:" + "\n    - " + "My allies and I are not slowed by difficult terrain and can't get lost except by magic" + "\n    - " + "I am alert to danger even when doing something else; I forage twice as much food" + "\n    - " + "If alone (or alone with beast companion), I can move stealthily at my normal pace" + "\n    - " + "When tracking, I also learn the exact number, size, and time since passing"
			},
			"grassland" : {
				name : "Grassland",
				source : ["HB", 0],
				description : "\n   " + "I can double my proficiency bonus for Int/Wis checks concerning grassland terrain" + "\n   " + "While traveling for an hour or more in grassland terrain I gain the following benefits:" + "\n    - " + "My allies and I are not slowed by difficult terrain and can't get lost except by magic" + "\n    - " + "I am alert to danger even when doing something else; I forage twice as much food" + "\n    - " + "If alone (or alone with beast companion), I can move stealthily at my normal pace" + "\n    - " + "When tracking, I also learn the exact number, size, and time since passing"
			},
			"mountain" : {
				name : "Mountain",
				source : ["HB", 0],
				description : "\n   " + "I can double my proficiency bonus for Int/Wis checks concerning mountain terrain" + "\n   " + "While traveling for an hour or more in mountain terrain I gain the following benefits:" + "\n    - " + "My allies and I are not slowed by difficult terrain and can't get lost except by magic" + "\n    - " + "I am alert to danger even when doing something else; I forage twice as much food" + "\n    - " + "If alone (or alone with beast companion), I can move stealthily at my normal pace" + "\n    - " + "When tracking, I also learn the exact number, size, and time since passing"
			},
			"swamp" : {
				name : "Swamp",
				source : ["HB", 0],
				description : "\n   " + "I can double my proficiency bonus for Int/Wis checks concerning swamp terrain" + "\n   " + "While traveling for an hour or more in swamp terrain I gain the following benefits:" + "\n    - " + "My allies and I are not slowed by difficult terrain and can't get lost except by magic" + "\n    - " + "I am alert to danger even when doing something else; I forage twice as much food" + "\n    - " + "If alone (or alone with beast companion), I can move stealthily at my normal pace" + "\n    - " + "When tracking, I also learn the exact number, size, and time since passing"
			},
			"underdark" : {
				name : "Underdark",
				source : ["HB", 0],
				description : "\n   " + "I can double my proficiency bonus for Int/Wis checks concerning underdark terrain" + "\n   " + "While traveling for an hour or more in underdark terrain I gain the following benefits:" + "\n    - " + "My allies and I are not slowed by difficult terrain and can't get lost except by magic" + "\n    - " + "I am alert to danger even when doing something else; I forage twice as much food" + "\n    - " + "If alone (or alone with beast companion), I can move stealthily at my normal pace" + "\n    - " + "When tracking, I also learn the exact number, size, and time since passing"
			},
		},
		"subclassfeature10" : {
			name : "Hardened",
			source : ["HB", 0],
			minlevel : 10,
			description : "\n   " + "I can't be frightened",
			savetxt : { immune : ["frightened"] }
		},
		"subclassfeature14" : {
			name : "Killing strike",
			source : ["HB", 0],
			minlevel : 14,
			description : "\n   " + "As a bonus action when I successfully hit a target, I can cast Finger of Death" + "\n   " + "The spell is cast as if using my highest level warlock spell slot, but does not expend any",
			usages : 1,
			additional : ["", "", "", "", "", "", "", "", "", "", "", "", "", "as 7th-level spell", "as 8th-level spell", "as 8th-level spell", "as 9th-level spell", "as 9th-level spell", "as 9th-level spell", "as 9th-level spell"],
			recovery : "long rest",
			action : ["bonus action", ""],
			spellcastingBonus : {
				name : "Killing Strike",
				spells : ["finger of death"],
				selection : ["finger of death"]
			}
		}
	}
});

if (!SourceList["UA:WA"]) {
	SourceList["UA:WA"] = {
		name : "Unearthed Arcana: Waterborne Adventures",
		abbreviation : "UA:WA",
		group : "Unearthed Arcana",
		url : "https://media.wizards.com/2015/downloads/dnd/UA_Waterborne_v3.pdf",
		date : "2015/05/04"
	};
};
if (!SourceList["UA:LDU"]) {
	SourceList["UA:LDU"] = {
		name : "Unearthed Arcana: Light, Dark, Underdark!",
		abbreviation : "UA:LDU",
		group : "Unearthed Arcana",
		url : "https://media.wizards.com/2015/downloads/dnd/02_UA_Underdark_Characters.pdf",
		date : "2015/11/02"
	};
};
